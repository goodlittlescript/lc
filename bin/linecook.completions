_linecook() {
  local word words

  # tries to do -L completions on the first word only
  word=${COMP_WORDS[COMP_CWORD]}
  template=${COMP_WORDS[@]:1}
  words="$(linecook -l "${template}" | grep -v "^${template}")"

  if [ -n "$words" ]
  then COMPREPLY=( $(compgen -W "$words" -- "$word") )
  else COMPREPLY=()
  fi
}

complete -o bashdefault -o default -F _linecook linecook
